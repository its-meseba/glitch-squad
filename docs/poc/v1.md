# Glitch Squad: Protocol Alpha â€” POC v1 Specification

> **Version**: 1.0  
> **Status**: Implementation Ready  
> **Core Tech**: SwiftUI, YOLOv8 (Apple/Banana/Orange), Local-only

---

## ğŸ® Product Summary

**Glitch Squad: Protocol Alpha** is a "phygital" scavenger hunt game where kids help repair a broken robot named **Pixel** by finding real-world fruits using their device camera.

### Core Loop
1. **Pixel is broken** â†’ Kid receives mission
2. **Kid runs to find fruit** â†’ Camera + YOLO detection
3. **Fruit captured** â†’ Pixel repairs, kid earns reward
4. **Repeat 3x** â†’ Pixel fully repaired, game complete

---

## ğŸ”„ Game Flow (State Machine)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        GAME STATES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚  INTRO  â”‚â”€â”€â”€â–¶â”‚ MISSION_BRIEFING â”‚â”€â”€â”€â–¶â”‚   HUNT    â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
â”‚        â”‚                                        â”‚             â”‚
â”‚        â”‚ (First launch only)                    â–¼             â”‚
â”‚        â”‚                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚        â”‚                                 â”‚  LOCK_ON  â”‚        â”‚
â”‚        â”‚                                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚
â”‚        â”‚                                        â”‚             â”‚
â”‚        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚        â”‚    â–¼                                                 â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚        â”‚  â”‚ DIGITIZING  â”‚â”€â”€â”€â–¶â”‚     SUCCESS      â”‚            â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚        â”‚                               â”‚                      â”‚
â”‚        â”‚                               â–¼                      â”‚
â”‚        â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚        â”‚                     â”‚  More missions?  â”‚            â”‚
â”‚        â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚        â”‚                              â”‚                       â”‚
â”‚        â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚        â”‚            â–¼                                â–¼       â”‚
â”‚        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚        â”‚   â”‚ MISSION_BRIEFING â”‚           â”‚   GAME_OVER   â”‚  â”‚
â”‚        â”‚   â”‚   (next fruit)   â”‚           â”‚ (Pixel fixed!)â”‚  â”‚
â”‚        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â”‚                                          â”‚          â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                     (App restart)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Screen Specifications

### Screen 1: Intro (First Launch)
**Duration**: ~5 seconds, auto-advances

| Element | Description |
|---------|-------------|
| Background | Deep purple gradient, subtle particle effects |
| Animation | Glitch static clears to reveal Pixel (slide up) |
| Audio | `glitch_static.mp3` â†’ `system_boot.mp3` |
| Voice | TTS: "System Failure... Power Critical... Agent, are you there?" |
| Transition | Fade to Mission Briefing |

**SwiftUI Implementation**:
- Use `.transition(.move(edge: .bottom))` for Pixel entrance
- Glitch effect via `.offset()` with random values on timer
- Progress to briefing after TTS completes

---

### Screen 2: Mission Briefing
**Purpose**: Get kid OFF the screen and moving

| Element | Description |
|---------|-------------|
| Background | Blurred camera feed or gradient |
| Character | Pixel at bottom-left, animating (pulse/bob) |
| Mission Card | Glass card with current mission |
| Button | "ACCEPT MISSION" - large, pulsing, green gradient |

**Mission Card Content**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš¡ MISSION 1: POWER SOURCE        â”‚
â”‚                                     â”‚
â”‚  Pixel's battery is critical!       â”‚
â”‚                                     â”‚
â”‚  [ğŸ APPLE icon - large]            â”‚
â”‚                                     â”‚
â”‚  "I need RED ENERGY! Find an APPLE!"â”‚
â”‚                                     â”‚
â”‚  â±ï¸ 60 seconds                      â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚    ğŸš€ ACCEPT MISSION ğŸš€     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Haptics**: `.impact(.heavy)` on button press

---

### Screen 3: Hunt (Camera Active)
**Purpose**: Child searches for fruit

| Element | Description |
|---------|-------------|
| Background | Live camera feed |
| Top-Left | Target indicator: "ğŸ” Find: ğŸ" |
| Top-Right | Timer with urgency color (red < 10s) |
| Center | Reticle frame `[  ]` |
| Bounding Box | Green when target detected |

**Detection Logic**:
- Confidence threshold: 80%
- Lock-on starts when correct fruit detected
- Continuous haptic feedback while locking

---

### Screen 4: Lock-On
**Purpose**: Stabilize on target

| Element | Description |
|---------|-------------|
| Background | Camera with target highlighted |
| Center | LockOnRing (circular progress 0â†’100%) |
| Text | "TARGET ACQUIRED! HOLD STEADY..." |
| Audio | `target_lock.mp3` (looping subtle beep) |

**Confidence Bucket**:
- +5% per frame when target visible
- -3% per frame when target lost
- 100% = success triggered

---

### Screen 5: Digitizing (Capture Animation)
**Duration**: 2-3 seconds

| Element | Description |
|---------|-------------|
| Background | Frozen camera frame |
| Effect | Grid overlay on fruit, particle absorption |
| Animation | Fruit shrinks and flies to inventory slot |
| Audio | `digitize_scan.mp3` |

**SwiftUI Implementation**:
- Screenshot camera view
- Apply grid overlay with `.mask()`
- Scale + position animation to corner

---

### Screen 6: Success
**Duration**: 3 seconds, auto-advances

| Element | Description |
|---------|-------------|
| Background | Dim overlay |
| Character | Pixel happy pose, bouncing |
| Reward Card | "+50 Glitch Bits", battery meter fills |
| Confetti | Particle explosion |
| Audio | `success_powerup.mp3` |
| Voice | TTS: "YES! Target acquired! Systems charging..." |

---

### Screen 7: Game Over (Pixel Fixed)
**Purpose**: Celebrate completion

| Element | Description |
|---------|-------------|
| Background | Gradient (broken â†’ clean sci-fi) |
| Character | Pixel fully repaired, celebrating |
| Stats | "3/3 Missions Complete" |
| Trophy | ğŸ† emoji large |
| Button | "Play Again" restarts from Mission 1 |

---

## ğŸ¯ Mission Definitions

| # | Target | Narrative | Pixel State | Win Effect |
|---|--------|-----------|-------------|------------|
| 1 | Apple ğŸ | "Red Energy for battery" | Sad, low power | Battery 5% â†’ 35% |
| 2 | Banana ğŸŒ | "Yellow Stabilizer" | Glitching, wobbly | Stops shaking |
| 3 | Orange ğŸŠ | "Citrus Shields vs virus" | Under attack | Virus clears, fully healed |

---

## ğŸ’¾ Data Persistence

Using `@AppStorage` (UserDefaults):

```swift
@AppStorage("currentMissionIndex") var missionIndex: Int = 0
@AppStorage("totalGlitchBits") var glitchBits: Int = 0
@AppStorage("isPixelRepaired") var isRepaired: Bool = false
```

---

## ğŸ¨ Design Tokens

### Colors
| Name | Hex | Usage |
|------|-----|-------|
| Deep Purple | `#1A1A2E` | Background dark |
| Nebula Blue | `#16213E` | Background mid |
| Neon Cyan | `#00D9FF` | Accents, Pixel eyes |
| Success Green | `#00FF94` | Lock-on, win states |
| Warning Red | `#FF6B6B` | Timer urgent, low battery |
| Glitch Pink | `#F472B6` | Glitch effects |

### Typography
- **Font**: SF Pro Rounded (system)
- **Sizes**: 48pt headlines, 24pt body, 16pt captions
- **Weight**: Bold for CTAs, Medium for body

### Glassmorphism
```swift
.background(.ultraThinMaterial)
.cornerRadius(30)
.overlay(
    RoundedRectangle(cornerRadius: 30)
        .stroke(.white.opacity(0.3), lineWidth: 1)
)
.shadow(color: .black.opacity(0.2), radius: 20)
```

---

## ğŸ”Š Audio Cues

| Event | Sound File | Duration |
|-------|------------|----------|
| App launch (first) | `glitch_static.mp3` | 2s |
| Pixel appears | `system_boot.mp3` | 2s |
| Mission accept | `mission_accept.mp3` | 1s |
| Object detected | `target_lock.mp3` | loop |
| Capture complete | `digitize_scan.mp3` | 2s |
| Mission success | `success_powerup.mp3` | 3s |

---

## ğŸ“ Technical Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ContentView                        â”‚
â”‚         (Router based on GameState)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  IntroView  â”‚  â”‚ BriefingViewâ”‚  â”‚  HuntView   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ DigitizeViewâ”‚  â”‚ SuccessView â”‚  â”‚GameOverView â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  GameViewModel                        â”‚
â”‚  - gameState: GameState                              â”‚
â”‚  - currentMission: Mission                           â”‚
â”‚  - lockOnProgress: Double                            â”‚
â”‚  - glitchBits: Int                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CameraService  â”‚  DetectorService  â”‚  AudioService  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… POC Scope Boundaries

### âœ… In Scope
- 3 sequential missions (Apple â†’ Banana â†’ Orange)
- Pixel character with 4 states (idle, happy, sad, glitch)
- TTS voice for Pixel dialogue
- Local sound effects
- Glassmorphism UI
- Confidence bucket lock-on system
- Local persistence (UserDefaults)

### âŒ Out of Scope (Future)
- 3D character models
- Background music
- Online leaderboards
- Multiple difficulty levels
- Additional object classes
- Parent dashboard
- Monetization
